# 🗑️ دليل حذف البيانات المالية - Nokta POS

## ⚠️ تحذير مهم
**هذا السكريبت سيحذف جميع البيانات المالية نهائياً ولا يمكن استردادها!**

## 📋 البيانات التي سيتم حذفها

### 1. المدفوعات (Payments)
- جميع سجلات المدفوعات
- تفاصيل المعاملات
- استجابات بوابات الدفع

### 2. الطلبات (Orders)
- جميع الطلبات
- عناصر الطلبات
- تفاصيل العملاء
- معلومات الدفع

### 3. معاملات المخزون (Inventory Transactions)
- جميع حركات المخزون
- سجلات الإدخال والإخراج
- عمليات التحويل
- التعديلات

### 4. سجلات التدقيق (Audit Logs)
- سجلات العمليات المالية
- سجلات الطلبات
- سجلات المدفوعات

## 🚀 طرق التشغيل

### الطريقة الأولى: استخدام PowerShell (مُوصى بها)
```powershell
# تشغيل السكريبت
.\clear_financial_data.ps1
```

### الطريقة الثانية: تشغيل مباشر
```bash
# الانتقال إلى مجلد backend
cd backend

# تشغيل السكريبت
node clear_financial_data.js
```

### الطريقة الثالثة: استخدام SQL مباشرة
```sql
-- تشغيل السكريبت SQL
source clear_financial_data.sql
```

## 📋 المتطلبات

- Node.js مثبت
- قاعدة بيانات MySQL تعمل
- ملف `.env` مُعد بشكل صحيح
- صلاحيات الكتابة على قاعدة البيانات

## 🔧 إعداد ملف .env

تأكد من وجود الملف `backend/.env` مع المتغيرات التالية:

```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=nokta_user
DB_PASSWORD=your_password
DB_NAME=nokta_pos
```

## 📊 ملخص العملية

السكريبت سيقوم بـ:
1. ✅ الاتصال بقاعدة البيانات
2. 🔒 تعطيل فحص المفاتيح الأجنبية
3. 🗑️ حذف جميع البيانات المالية
4. 🔄 إعادة تعيين العدادات التلقائية
5. 🔒 إعادة تفعيل فحص المفاتيح الأجنبية
6. 📊 عرض ملخص العملية

## 🚨 في حالة حدوث خطأ

إذا حدث خطأ أثناء العملية:
1. تحقق من اتصال قاعدة البيانات
2. تأكد من صحة بيانات الاتصال
3. تحقق من صلاحيات المستخدم
4. راجع سجلات الخطأ

## 📞 الدعم

في حالة الحاجة للمساعدة:
- راجع سجلات الخطأ
- تحقق من إعدادات قاعدة البيانات
- تأكد من تثبيت جميع التبعيات

## 🔄 استعادة البيانات

**ملاحظة مهمة**: لا يمكن استرداد البيانات المحذوفة إلا إذا كان لديك:
- نسخة احتياطية حديثة
- سجلات منفصلة
- نظام أرشفة

## 📝 سجل التغييرات

- **v1.0**: الإصدار الأول - حذف كامل للبيانات المالية
- **الميزات**: حذف آمن، إعادة تعيين العدادات، سجلات مفصلة
